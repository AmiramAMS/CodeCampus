<!DOCTYPE html>
<html lang="{{ current_lang }}" dir="{{ 'rtl' if current_lang=='he' else 'ltr' }}">
<head>
  <meta charset="UTF-8">
  <title>CodeCampus</title>

  <!-- Bootstrap CSS (×¢× RTL ×œ×¤×™ ×©×¤×”) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap{{ '.rtl' if current_lang=='he' else '' }}.min.css"
    rel="stylesheet"
  />
  <!-- Bootstrap Icons -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />
  <!-- CodeMirror CSS -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css"
  />
  <!-- Custom CSS -->
  <link
    rel="stylesheet"
    href="{{ url_for('static', filename='css/c_style.css') }}"
  />
</head>
<body>
  <!-- ===== Main Navbar ===== -->
  <nav class="navbar navbar-expand-lg navbar-light bg-light px-4">
    <button class="btn btn-outline-secondary me-3"
            data-bs-toggle="offcanvas"
            data-bs-target="#sidebar">
      â˜°
    </button>
    <a class="navbar-brand d-flex align-items-center" href="{{ url_for('home') }}" style="text-decoration: none; gap: 0.5rem;">
      <img src="{{ url_for('static', filename='images/logo.png') }}" 
           alt="CodeCampus Logo" 
           style="height: 45px; width: auto;"
           onerror="this.style.display='none';">
      <span class="navbar-brand-text">CodeCampus</span>
    </a>

    <div class="ms-auto d-flex align-items-center">
      {% if current_username %}
        <span class="me-3">
          {{ '×©×œ×•×' if current_lang=='he' else 'Hello' }}
          {{ current_username }}
        </span>
      {% endif %}

      <!-- Profile dropdown -->
      <div class="dropdown">
        <a class="nav-link dropdown-toggle p-0" href="#" id="profileDropdown"
           data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person-circle fs-4"></i>
        </a>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li>
            <a class="dropdown-item" href="{{ url_for('profile') }}">
              <i class="bi bi-person me-2"></i>
              {{ '×¤×¨×•×¤×™×œ ××™×©×™' if current_lang=='he' else 'Profile' }}
            </a>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li>
            <form action="{{ url_for('set_language', lang='he') }}" method="post">
              <button class="dropdown-item">ğŸ‡®ğŸ‡± ×¢×‘×¨×™×ª</button>
            </form>
          </li>
          <li>
            <form action="{{ url_for('set_language', lang='en') }}" method="post">
              <button class="dropdown-item">ğŸ‡ºğŸ‡¸ English</button>
            </form>
          </li>
          <li><hr class="dropdown-divider"></li>
          <li>
            <form action="{{ url_for('logout') }}" method="post">
              <button class="dropdown-item text-danger">
                <i class="bi bi-box-arrow-right me-2"></i>
                {{ '×”×ª× ×ª×§' if current_lang=='he' else 'Logout' }}
              </button>
            </form>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- ===== Secondary Controls Under Greeting ===== -->
  <div class="bg-white border-bottom px-4 py-2 d-flex align-items-center">
    <!-- File menu -->
    <div class="dropdown">
      <button class="btn btn-outline-secondary" type="button"
              id="fileMenu" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="bi bi-file-earmark"></i>
        {{ '×§×•×‘×¥' if current_lang=='he' else 'File' }}
      </button>
      <ul class="dropdown-menu" aria-labelledby="fileMenu">
        <li>
          <a class="dropdown-item" href="#" onclick="newFile()">
            <i class="bi bi-file-earmark-plus me-2"></i>
            {{ '×§×•×‘×¥ ×—×“×©' if current_lang=='he' else 'New File' }}
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="#" onclick="openFile()">
            <i class="bi bi-folder2-open me-2"></i>
            {{ '×¤×ª×— ×§×•×‘×¥' if current_lang=='he' else 'Open File' }}
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="#" onclick="saveFile()">
            <i class="bi bi-save me-2"></i>
            {{ '×©××•×¨ ×§×•×‘×¥' if current_lang=='he' else 'Save File' }}
          </a>
        </li>
      </ul>
    </div>

    <!-- Run Code button -->
    <button class="btn btn-primary ms-2" onclick="runCode()">
      <i class="bi bi-play-fill me-1"></i>
      {{ '×”×¨×¥ ×§×•×“' if current_lang=='he' else 'Run Code' }}
    </button>

    <!-- Language selector -->
    <select id="language-select"
            class="form-select ms-2"
            style="min-width: 120px;">
      <option value="python">Python</option>
      <option value="java">Java</option>
      <option value="cpp">C++</option>
    </select>
  </div>

  <!-- ===== Offcanvas Sidebar ===== -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="sidebar">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title">{{ '×ª×¤×¨×™×˜' if current_lang=='he' else 'Menu' }}</h5>
      <button type="button" class="btn-close text-reset"
              data-bs-dismiss="offcanvas"></button>
    </div>
    <div class="offcanvas-body p-0">
      <ul class="nav nav-pills flex-column">
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint=='home' %}active{% endif %}"
             href="{{ url_for('home') }}">{{ '×¢×•×¨×š ×§×•×“' if current_lang=='he' else 'Code Editor' }}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint=='questions' %}active{% endif %}"
             href="{{ url_for('questions') }}">{{ '×©××œ×•×ª' if current_lang=='he' else 'Questions' }}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link {% if request.endpoint=='profile' %}active{% endif %}"
             href="{{ url_for('profile') }}">{{ '×¤×¨×•×¤×™×œ ××™×©×™' if current_lang=='he' else 'Profile' }}</a>
        </li>
      </ul>
    </div>
  </div>

  <!-- ===== Main Content ===== -->
  <div class="container-fluid mt-4">
    {% block content %}{% endblock %}
  </div>

  <!-- Bootstrap & CodeMirror JS -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/python/python.min.js"
  ></script>
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/clike/clike.min.js"
  ></script>

  {% block extra_scripts %}{% endblock %}
</body>
</html>
 